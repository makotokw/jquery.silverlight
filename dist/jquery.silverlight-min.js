/*
 * jquery.silverlight
 * 
 * Copyright (c) 2010-2011 makoto_kw, http://www.makotokw.com
 * Licensed under the MIT license.
 * 
 * @author makoto_kw
 * @version 0.1
 */
(function(k){var a=navigator.userAgent.toLowerCase(),d=function(n){return n.test(a)},c=d(/opera/),l=d(/webkit/),b=!l&&d(/gecko/),f=!c&&d(/msie/),i=d(/windows|win32/);var m="4";var e={"3":{minRuntimeVersion:"3.0.40818.0",content:'<a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=3.0.40818.0" style="text-decoration:none"><img src="http://go.microsoft.com/fwlink/?LinkId=108181" alt="Get Microsoft Silverlight" style="border-style:none"/></a>'},"4":{minRuntimeVersion:"4.0.50401.0",content:'<a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=4.0.50401.0" style="text-decoration:none"><img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/></a>'}};var h={silverlight:{data:"data:application/x-silverlight-2,",type:"application/x-silverlight-2",width:"640",height:"480",param:{onError:"onSilverlightError",minRuntimeVersion:e[m].minRuntimeVersion,autoUpgrade:"true"},content:e[m].content},window:{id:"silverlightbox",css:{position:"absolute",top:0,left:0,width:"100%",zIndex:100,textAlign:"center",lineHeight:0}},overlay:{enabled:true,id:"silverlightbox_overlay",fadeIn:200,feedOut:400,css:{backgroundColor:"#000",opacity:0.8,position:"absolute",top:0,left:0,zIndex:90,width:"100%",height:"500px"}},events:{opened:null,closed:null}};function j(o){o=k.extend(true,{},h.silverlight,o);var n=[],p=[];k.each(["id","data","type","width","height"],function(){var r=this.toString(),q=o[r];if(q!==undefined){n.push(r+'="'+q.toString()+'"')}});k.each(o.param,function(q,r){p.push('<param name="'+q+'" value="'+r+'">')});p.push(o.content);return"<object "+n.join("")+">"+p.join("")+"</object>"}function g(q){if(q=="close"){t()}q=k.extend(true,{},h,q);p();function p(){var v=k("#"+q.window.id);if(v.length==0){v=k("<div/>").attr({id:q.window.id}).css(q.window.css);k("body").append(v)}var u=k("#"+q.overlay.id);if(u.length==0){u=k("<div/>").attr({id:q.overlay.id}).css(q.overlay.css).click(function(w){t();return false});k("body").append(u)}k("embed, object, select").css({visibility:"hidden"});u.hide().addClass("silverlightbox_overlay").fadeIn(q.overlay.fadeIn,function(){});v.silverlight(q.silverlight);o();k(document).bind("keydown.silverlightbox",function(w){if(w.keyCode==27){t()}return true});k(window).bind("resize.silverlightbox",function(){o()});if(q.events.opened){q.events.opened.apply(this,[])}}function t(){k(window).unbind("resize.silverlightbox");k(document).unbind("keydown.silverlightbox");var u=k("#"+q.overlay.id),v=k("#"+q.window.id);v.remove();u.fadeOut(q.overlay.fadeOut,function(){u.remove();k("embed, object, select").css({visibility:"visible"})})}function o(){var u=k("#"+q.overlay.id),x=k("#"+q.window.id);if(u.length>0||x.length>0){var v=s(),w=n(),y=r(v);u.css({backgroundColor:q.overlay.backgroundColor,opacity:q.overlay.opacity,width:v[0],height:v[1]});x.css({top:w[1]+((v[3]-y[1])/2)-5,left:w[0]+((v[2]-y[0])/2)-5,width:y[0]+10,height:y[1]+10});k("object",x).attr({width:y[0],height:y[1]})}}function s(){var w,u;if(window.innerHeight&&window.scrollMaxY){w=window.innerWidth+window.scrollMaxX;u=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){w=document.body.scrollWidth;u=document.body.scrollHeight}else{w=document.body.offsetWidth;u=document.body.offsetHeight}}var v,x;if(self.innerHeight){v=(document.documentElement.clientWidth)?document.documentElement.clientWidth:self.innerWidth;x=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){v=document.documentElement.clientWidth;x=document.documentElement.clientHeight}else{if(document.body){v=document.body.clientWidth;x=document.body.clientHeight}}}return[Math.min(w,v),Math.max(u,x),v,x]}function n(){var v,u;if(self.pageYOffset){u=self.pageYOffset;v=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){u=document.documentElement.scrollTop;v=document.documentElement.scrollLeft}else{if(document.body){u=document.body.scrollTop;v=document.body.scrollLeft}}}return[v,u]}function r(v){var w=q.silverlight.width,u=q.silverlight.height;try{if(w.toString().indexOf("%")!==-1){w=v[2]*parseInt(w)/100}else{w=parseInt(w)}if(u.toString().indexOf("%")!==-1){u=v[3]*parseInt(u)/100}else{u=parseInt(u)}return[w,u]}catch(x){}return[h.silverlight.width,h.silverlight.height]}return this}k.fn.extend({silverlight:function(n){k(this).append(k(j(n)));return this}});k.extend({silverlight:{versions:e,toString:j,lightbox:g}})})(jQuery);